{"version":3,"sources":["index.js"],"names":["express","require","router","Router","Employee","Skill","EmpSkill","Project","catchErrors","bcrypt","Peer","admin","serAccount","initializeApp","credential","cert","set","generateHash","password","hash","comparePassword","compare","validateForm","form","name","id","length","getDday","end","today","Date","year","getFullYear","month","getMonth","day","getDate","endArray","toString","split","end_date","dateArray","get","req","res","next","render","title","findAll","skills","session","authorization","json","message","findOne","where","authorization_no","user","pwd","education","work_experience","emp_no","include","model","attributes","userSkills","skill","route","post","console","log","body","ID","flash","redirect","state","as","through","projects","project","d_day","dataValues","project_name","err","create","PWD","dept_no","department","skill_no","mypage","use","module","exports"],"mappings":"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","sourcesContent":["var express = require(\"express\");\nvar router = express.Router();\nvar Employee = require(\"../models/employee\");\nvar Skill = require(\"../models/skill\");\nvar EmpSkill = require(\"../models/emp_skill\");\nvar Project = require('../models/project');\nconst catchErrors = require(\"../lib/async-error\");\nvar bcrypt = require(\"bcrypt\");\nconst Peer = require(\"../models/peer_evaluation\");\nconst admin = require(\"firebase-admin\");\n\nlet serAccount = require(\"../node-7fe56-firebase-adminsdk-6a08y-3ebbb95309.json\");\n\nadmin.initializeApp({\n    credential: admin.credential.cert(serAccount),\n});\n\nexpress().set(\"admin\", admin);\n\nfunction generateHash(password) {\n    return bcrypt.hash(password, 10);\n}\n\nfunction comparePassword(password, hash) {\n    return bcrypt.compare(password, hash);\n}\n\nfunction validateForm(form) {\n    var name = form.name || \"\";\n    var id = form.id || \"\";\n    var password = form.password || \"\";\n\n    if (!name) {\n        return \"이름을 입력해주세요.\";\n    }\n\n    if (name.length < 2) {\n        return \"이름은 두 글자 이상 입력해주세요.\";\n    }\n\n    if (!id) {\n        return \"ID를 입력해주세요.\";\n    }\n\n    if (!password) {\n        return \"비밀번호를 입력해주세요.\";\n    }\n\n    // if (password !== password_confirmation) {\n    //   return '비밀번호가 일치하지 않습니다.';\n    // }\n\n    if (password.length < 7) {\n        return \"비밀번호가 너무 짧습니다. (8자 이상)\";\n    }\n\n    return null;\n}\n\nfunction getDday(end) {\n    let today = new Date();\n    let year = today.getFullYear(); // 년도\n    let month = today.getMonth() + 1;  // 월\n    let day = today.getDate();  // 날짜\n\n    var endArray = end.toString().split(\" \");\n    var end_date = endArray[0];\n    var dateArray = end_date.split(\"-\");\n\n    if(year == dateArray[0]) {\n        if(month == dateArray[1]) {\n            if(dateArray[2] - day <= 7) {\n                return dateArray[2] - day;\n            }\n        }\n    }\n\n    return null;\n}\n\n/* GET index listing. */\nrouter.get(\"/\", function (req, res, next) {\n    res.render(\"index\", { title: \"Index\" });\n});\n\nrouter.get(\"/signup\", catchErrors(async (req, res, next) => {\n    const skills = await Skill.findAll();\n    res.render(\"signup\", {skills: skills});\n}));\n\nrouter.get(\"/mypage\", async (req, res) => {\n    if (!req.session.authorization) res.json({ message: \"you should login\" });\n    const user = await Employee.findOne({\n        where: { authorization_no: req.session.authorization },\n    });\n    const { id, pwd, education, name, work_experience, emp_no } = user;\n    const userSkills = await Skill.findAll({\n        include: [\n            {\n                model: EmpSkill,\n                where: [`emp_no = ${emp_no}`],\n            },\n        ],\n        attributes: [\"skill_name\"],\n    });\n    res.json({\n        id,\n        pwd,\n        education,\n        skill: userSkills,\n        name,\n        work_experience,\n    });\n});\n\nrouter.route(\"/signin\")\n    .get((req, res) => {\n        res.render(\"signin\", {});\n    })\n\n    .post(\n        catchErrors(async (req, res, next) => {\n            console.log(req.body);\n\n            const user = await Employee.findOne({ where: { ID: req.body.id } });\n            if (!user) {\n                req.flash(\"danger\", \"존재하지 않는 ID 입니다.\");\n                return res.redirect(\"back\");\n            }\n\n            const projects = await Project.findAll({\n                where: {\n                    state: '진행중'\n                },\n                include: [\n                    {    \n                        model: Employee,\n                        as: 'project_emp',\n                        through: {\n                            where: { emp_no: user.emp_no }\n                        }\n                    }\n                ]\n            }); \n\n            for(let project of projects) {\n                var d_day = getDday(project.dataValues.end_date);\n                if(d_day) {\n                    req.flash(\"warning\", `${project.project_name} 프로젝트의 마감일자까지 ${d_day}일 남았습니다.`);\n                }\n            }\n            \n            req.session.user = user;\n            req.session.authorization = user.authorization_no;\n            req.flash(\"success\", `${user.name}님 환영합니다!`);\n            return res.redirect(\"/\");\n        })\n    );\n\nrouter.post(\"/signup\", catchErrors(async (req, res, next) => {\n    console.log(req.body);\n\n    var err = validateForm(req.body);\n    if (err) {\n        req.flash(\"danger\", err);\n        return res.redirect(\"back\");\n    }\n\n    var user = await Employee.findOne({ where: {ID: req.body.id} });\n\n    if (user) {\n        req.flash(\"danger\", \"이미 존재하는 ID 입니다.\");\n        return res.redirect(\"back\");\n    }\n\n    var password = await generateHash(req.body.password);\n\n    user = await Employee.create({\n        name: req.body.name,\n        ID: req.body.id,\n        PWD: password,\n        dept_no: req.body.department,\n        authorization_no: null,\n        education: req.body.education,\n        work_experience: null\n    });\n\n    for(let skill of req.body.skills) {\n        await EmpSkill.create({\n            emp_no: user.emp_no,\n            skill_no: skill\n        });\n    }\n\n    req.flash(\"success\", \"정상적으로 회원가입되었습니다.\");\n    res.redirect(\"/\");\n}));\n\nrouter.get(\"/signout\", (req, res, next) => {\n    delete req.session.user;\n    req.flash(\"success\", \"정상적으로 로그아웃 되었습니다.\");\n    res.redirect(\"/\");\n});\n\nrouter.get(\"/test\", function (req, res, next) {\n    res.render(\"index2\", { title: \"Express\", name: \"han sh\" });\n});\n\n// router.get(\"/project/:id\", catchErrors( async (req, res) => {\n//     const { id } = req.params;\n//     if (!req.session.authorization) res.json({ message: \"you should login\" });\n//     const user = await Employee.findOne({\n//         where: { id },\n//     });\n//     let total = 0;\n//     const scores = await Peer.findAll({\n//         where: {\n//             evaluation_no: user.emp_no,\n//         },\n//     });\n\n//     scores.forEach((val) => {\n//         total += val.evaluation_score1;\n//         total += val.evaluation_score2;\n//     });\n\n//     res.json({\n//         total,\n//         average: total / (scores.length * 2),\n//     });\n// }));\n\n// router.get(\"/project\", catchErrors( async (req, res) => {\n//     let max = -1;\n//     let index = -1;\n//     const scores = await Peer.findAll({});\n//     scores.forEach((val, i) => {\n//         const temp = val.evaluation_score1 + val.evaluation_score2;\n//         if (max < temp) index = i;\n//     });\n//     const user = await Employee.findOne({\n//         where: { emp_no: scores[index].evaluation_no },\n//     });\n\n//     res.json(user);\n// }));\n\n// mypage router 사용\nconst mypage = require(\"./mypage\");\nexpress().use(\"/mypage\", mypage);\n\n\n/*회원가입 화면*/\nrouter.get(\"/test3\", function (req, res, next) {\n    res.render(\"signup\", { title: \"Express\" });\n});\n\n/*nav_개발자*/\nrouter.get(\"/navbar\", function (req, res, next) {\n    res.render(\"includes/navbar\", { title: \"Express\" });\n});\n\n\n\n/*프로젝트 등록 페이지*/\nrouter.get(\"/addproject\", function (req, res, next) {\n    res.render(\"addProject\", { title: \"Express\" });\n});\n\n/*마이페이지*/\nrouter.get(\"/mypage\", function (req, res, next) {\n    res.render(\"mypage/mypageview\", { title: \"Express\" });\n});\n\n/*개인정보 수정*/\nrouter.get(\"/myprofileedit\", function (req, res, next) {\n    res.render(\"mypage/myProfileEdit\", { title: \"Express\" });\n});\n\n/*고객평가 해당 직원 리스트 페이지*/\nrouter.get('/evaluation/customer_evaluation', function(req, res, next){\n  res.render('evaluation/customer_evaluation', { title: 'Express' });\n});\n\n/*고객평가 입력페이지*/\nrouter.get('/evaluation/inputCustomer_evaluation', function(req, res, next){\n  res.render('evaluation/inputCustomer_evaluation', { title: 'Express' });\n});\n\n/*동료평가 해당 직원 리스트 페이지*/\nrouter.get('/evaluation/peer_evaluation', function(req, res, next){\n  res.render('evaluation/peer_evaluation', { title: 'Express' });\n});\n\n/*동료평가 입력페이지*/\nrouter.get('/evaluation/inputPeer_evaluation', function(req, res, next){\n  res.render('evaluation/inputPeer_evaluation', { title: 'Express' });\n});\n\n/*PM평가 해당 직원 리스트 페이지*/\nrouter.get('/evaluation/pm_evaluation', function(req, res, next){\n  res.render('evaluation/pm_evaluation', { title: 'Express' });\n});\n\n/*PM평가 입력페이지*/\nrouter.get('/evaluation/inputPm_evaluation', function(req, res, next){\n  res.render('evaluation/inputPm_evaluation', { title: 'Express' });\n});\n\n/*고객평가 해당 직원 리스트 페이지*/\nrouter.get('/evaluation/customer_evaluation', function(req, res, next){\n  res.render('evaluation/customer_evaluation', { title: 'Express' });\n});\n\n/*고객평가 입력페이지*/\nrouter.get('/evaluation/inputCustomer_evaluation', function(req, res, next){\n  res.render('evaluation/inputCustomer_evaluation', { title: 'Express' });\n});\n\n/*고객평가서 항목 수정페이지*/\nrouter.get('/evaluation/modification_customerEval', function(req, res, next){\n    res.render('evaluation/modification_customerEval', { title: 'Express' });\n  });\n\n/*업무능력서 항목 수정페이지*/\nrouter.get('/evaluation/modification_peerEval', function(req, res, next){\n    res.render('evaluation/modification_peerEval', { title: 'Express' });\n  });\n\n/*특정직원의 동료,pm,peer평가 결과(점수,합계,평균)를 확인하는 페이지*/\nrouter.get('/management/evaluationResult_inquiry', function(req, res, next){\n    res.render('management/evaluationResult_inquiry', { title: 'Express' });\n  });\n\n/*특정직원의 고객평가 상세결과 페이지*/\nrouter.get('/evaluation/resultCustomer_eval', function(req, res, next){\n    res.render('evaluation/resultCustomer_eval', { title: 'Express' });\n  });\n\n/*특정직원의 PM평가 상세결과 페이지*/\nrouter.get('/evaluation/resultPm_eval', function(req, res, next){\n    res.render('evaluation/resultPm_eval', { title: 'Express' });\n  });\n\n/*특정직원의 동료평가 상세결과 페이지*/\nrouter.get('/evaluation/resultPeer_eval', function(req, res, next){\n    res.render('evaluation/resultPeer_eval', { title: 'Express' });\n  });\n\n/*project list*/\nrouter.get('/project/list', function (req, res, next) {\n    res.render('project/list', { title: \"Express\" });\n});\n\n/*project create*/\nrouter.get(\"/project/new\", function (req, res, next) {\n    res.render(\"project/new\", { title: \"Express\" });\n});\n\n/*project details*/\nrouter.get(\"/project/details\", function (req, res, next) {\n    res.render(\"project/details\", { title: \"Express\" });\n});\n\n/*project modify*/\nrouter.get(\"/project/modify\", function (req, res, next) {\n    res.render(\"project/modify\", { title: \"Express\" });\n});\n\n/*project task*/\nrouter.get(\"/project/checkTask\", function (req, res, next) {\n    res.render(\"project/checkTask\", { title: \"Express\" });\n});\n\n/*add Client*/\nrouter.get(\"/addclient\", function (req, res, next) {\n    res.render(\"addclient\", { title: \"Express\" });\n});\n\n/*add Task*/\nrouter.get(\"/project/addTask\", function (req, res, next) {\n    res.render(\"project/addTask\", { title: \"Express\" });\n});\n\n/*project finish*/\nrouter.get(\"/project/finish\", function (req, res, next) {\n    res.render(\"project/finish\", { title: \"Express\" });\n});\n\n/*inquiry Employee*/\nrouter.get(\"/employee/inquiryEmployee\", function (req, res, next) {\n    res.render(\"employee/inquiryEmployee\", { title: \"Express\" });\n});\n\n/*inquiry Employee*/\nrouter.get(\"/employee/detailEmployee\", function (req, res, next) {\n    res.render(\"employee/detailEmployee\", { title: \"Express\" });\n});\n\n\n\nmodule.exports = router;\n"],"file":"index.dev.js"}